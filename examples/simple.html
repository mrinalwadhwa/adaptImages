<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <!-- this is important for getting correct width -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Responsive Images</title>
  <style>img { width: 100%; } </style>
</head>
<body>

<noscript data-s="images/s.jpg" data-l="images/l.jpg" data-alt="Red and Blue">
  <img src="images/s.jpg" alt="Red and Blue" />
</noscript>

<script src="../adaptImages.js"></script>
<script>

  // For now using onload, might be better to use domready
  // but we should be careful since width related properties
  // can be quite unreliable
  // tripleodeon.com/2011/12/first-understand-your-screen
  // In my testing, it seems, document.documentElement.clientWidth can be
  // used reliably, atleast after onload
  window.onload = function(){
    // you could use whatever logic you wish to select size
    // could be based on screen size, connection speed, matchMedia etc.
    adaptImages(document.documentElement.clientWidth > 640 ? 'l' : 's');
  }
  
  window.onresize = function(){
    adaptImages(document.documentElement.clientWidth > 640 ? 'l' : 's');
  } 

</script>
</body>
</html>